# PicGo 客户端配置指南

本文档将带你如何在 PicGo 桌面客户端中配置自定义 Web 图床，以连接到自己搭建的图床服务。

## 配置步骤

### 1. 打开 PicGo 客户端

启动 PicGo 桌面应用程序。

### 2. 安装并设置 custom-uploader 1.0.3 插件

在插件设置中搜索 custom-uploader 1.0.3 ，点击右下角安装

在自定义 Web 图床配置区域填写以下信息：

#### 图床地址名

```
填写任意你想要的地址
```



#### API 地址
```
<BASE_URL>
```
> 应该与 `.env` 文件中配置的 `BASE_URL` 一致

#### API地址是否拼接文件名

```
这里默认是no，但是需要再次点选成no
```



#### POST file name

```
file
```

#### POST headers
```
Authorization: Bearer <API_KEY>
```
> 应该与 `.env` 文件中设置的 `API_KEY` 一致

#### 注意事项
- 如果在本地测试，可以使用 `http://localhost:3001/api/upload`（根据 .env 文件中的 PORT 配置）
- 确保 API 密钥严格保密，不要泄露给他人

### 4. 保存并切换图床

1. 点击「确定」按钮保存配置
2. 在图床选择下拉菜单中选择「自定义 Web 图床」
3. 点击「设为默认图床」按钮

### 5. 测试上传

1. 点击左侧菜单栏的「上传区」
2. 拖拽一张图片到上传区域，或点击「+」号选择图片
3. 点击「上传」按钮
4. 如果配置正确，图片将成功上传并在「相册」中显示

## 故障排除

### 上传失败常见原因

1. **API 密钥错误**
   - 检查 `Authorization` 请求头中的密钥是否正确
   - 确认服务端 `.env` 文件中的 `API_KEY` 配置正确

2. **网络连接问题**
   - 检查域名是否可以正常访问
   - 确认服务器防火墙是否开放了相应端口
   - 检查 Nginx 配置是否正确

3. **SSL 证书问题**
   - 如果使用 HTTPS，确保证书有效且配置正确
   - 本地测试时可以先使用 HTTP 协议

4. **文件大小超限**
   - 默认限制为 5MB，如需调整可在服务端修改配置

### 查看日志

如果上传仍然失败，请查看服务端日志以获取更多信息：
```bash
# 在项目目录下运行
npm start
# 或查看日志文件（如果您配置了日志记录）
```

## 安全建议

1. **使用强密码**：API 密钥应至少包含 32 位随机字符
2. **定期更换密钥**：建议每 3-6 个月更换一次 API 密钥
3. **启用 HTTPS**：在生产环境中务必使用 HTTPS 协议
4. **限制访问频率**：考虑在 Nginx 或应用层增加频率限制
5. **监控日志**：定期检查上传日志，发现异常行为及时处理

## 高级配置

### 自定义域名

如果有自己的域名，建议进行以下配置：
1. 将域名解析到服务器 IP
2. 更新 `.env` 文件中的 `BASE_URL` 为域名
3. 更新 Nginx 或者任意反代服务器配置

### CDN 加速

为了提高图片访问速度可以：
1. 使用云服务商提供的 CDN 服务
2. 将 `/uploads` 目录同步到 CDN
3. 更新 `BASE_URL` 为 CDN 地址

这样，PicGo 自定义图床就配置完成了！